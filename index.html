<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudySparkAI - Master Math with AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .main-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .tab-nav {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .tab-btn {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .loading.show {
            display: block;
        }

        .study-plan {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .plan-day {
            background: white;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .plan-day h4 {
            color: #667eea;
            margin-bottom: 8px;
        }

        .flashcards {
            display: grid;
            gap: 20px;
            margin: 20px 0;
        }

        .flashcard {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            height: 200px;
            cursor: pointer;
            perspective: 1000px;
            transition: transform 0.3s;
        }

        .flashcard:hover {
            transform: scale(1.02);
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 500;
        }

        .flashcard-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .flashcard-back {
            background: #f8f9fa;
            color: #333;
            transform: rotateY(180deg);
        }

        .quiz {
            margin: 20px 0;
        }

        .question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .question h4 {
            margin-bottom: 15px;
            color: #333;
        }

        .answers {
            display: grid;
            gap: 10px;
        }

        .answer {
            padding: 12px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .answer:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .answer.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .answer.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
        }

        .answer.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .feedback {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .rating {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
        }

        .star {
            font-size: 24px;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star:hover, .star.active {
            color: #ffc107;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .tab-content {
                padding: 20px;
            }
        }

        .hidden {
            display: none;
        }

        .score-display {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 8px;
            margin: 20px 0;
        }

        .progress-bar {
            background: #e9ecef;
            height: 8px;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: #28a745;
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üìö StudySparkAI</h1>
            <p>Master Math with AI-Powered Study Plans</p>
        </header>

        <div class="main-card">
            <nav class="tab-nav">
                <button class="tab-btn active" onclick="switchTab('generate')">Generate Plan</button>
                <button class="tab-btn" onclick="switchTab('manual')">Manual Mode</button>
            </nav>

            <!-- AI Generation Tab -->
            <div id="generate" class="tab-content active">
                <form id="studyForm">
                    <div class="form-group">
                        <label for="topic">Math Topic</label>
                        <input type="text" id="topic" placeholder="e.g., Quadratic Equations, Trigonometry, Calculus" required>
                    </div>

                    <div class="form-group">
                        <label for="hours">Study Hours Per Week</label>
                        <input type="number" id="hours" min="1" max="20" placeholder="e.g., 3" required>
                    </div>

                    <div class="form-group">
                        <label for="style">Learning Style</label>
                        <select id="style" required>
                            <option value="">Choose your learning style</option>
                            <option value="visual">Visual (diagrams, videos, charts)</option>
                            <option value="auditory">Auditory (lectures, discussions)</option>
                            <option value="kinesthetic">Kinesthetic (hands-on, practice)</option>
                            <option value="reading">Reading/Writing (text, notes)</option>
                        </select>
                    </div>

                    <button type="submit" class="btn">‚ú® Generate AI Study Plan</button>
                </form>

                <div id="loading" class="loading">
                    <p>ü§ñ AI is creating your personalized study plan...</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- Manual Mode Tab -->
            <div id="manual" class="tab-content">
                <h3>Create Your Own Study Plan</h3>
                <p>Prefer to design your own study schedule? Enter your custom plan below:</p>
                
                <div class="form-group">
                    <label for="customTopic">Topic</label>
                    <input type="text" id="customTopic" placeholder="Enter your math topic">
                </div>

                <div class="form-group">
                    <label for="customPlan">Your 7-Day Study Plan</label>
                    <textarea id="customPlan" rows="8" placeholder="Day 1: Review basic concepts (30 min)
Day 2: Practice problems 1-10 (45 min)
Day 3: Watch Khan Academy video (20 min)
..."></textarea>
                </div>

                <button onclick="createManualPlan()" class="btn">üìù Create Manual Plan</button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results" class="hidden">
            <div class="main-card">
                <div class="tab-nav">
                    <button class="tab-btn active" onclick="switchResultTab('plan')">Study Plan</button>
                    <button class="tab-btn" onclick="switchResultTab('flashcards')">Flashcards</button>
                    <button class="tab-btn" onclick="switchResultTab('quiz')">Quiz</button>
                    <button class="tab-btn" onclick="switchResultTab('feedback')">Feedback</button>
                </div>

                <!-- Study Plan Results -->
                <div id="plan-tab" class="tab-content active">
                    <div id="studyPlanResults"></div>
                </div>

                <!-- Flashcards Results -->
                <div id="flashcards-tab" class="tab-content">
                    <h3>üìö Study Flashcards</h3>
                    <p>Click any card to flip it and see the answer!</p>
                    <div id="flashcardProgress">
                        <span id="cardProgress">0/10 cards reviewed</span>
                    </div>
                    <div id="flashcardsResults" class="flashcards"></div>
                </div>

                <!-- Quiz Results -->
                <div id="quiz-tab" class="tab-content">
                    <h3>üß† Knowledge Quiz</h3>
                    <p>Test your understanding with these practice questions:</p>
                    <div id="quizResults" class="quiz"></div>
                    <button id="checkAnswers" class="btn hidden" onclick="checkQuizAnswers()">Check Answers</button>
                    <div id="quizScore" class="score-display hidden"></div>
                </div>

                <!-- Feedback Tab -->
                <div id="feedback-tab" class="tab-content">
                    <div class="feedback">
                        <h3>üí¨ Rate Your Experience</h3>
                        <p>How helpful was this study plan?</p>
                        
                        <div class="rating" id="rating">
                            <span class="star" data-rating="1">‚≠ê</span>
                            <span class="star" data-rating="2">‚≠ê</span>
                            <span class="star" data-rating="3">‚≠ê</span>
                            <span class="star" data-rating="4">‚≠ê</span>
                            <span class="star" data-rating="5">‚≠ê</span>
                        </div>

                        <div class="form-group">
                            <label for="suggestions">Suggestions for Improvement</label>
                            <textarea id="suggestions" rows="4" placeholder="What could we improve? Any specific features you'd like to see?"></textarea>
                        </div>

                        <button onclick="submitFeedback()" class="btn">Submit Feedback</button>
                    </div>
                </div>

                <button onclick="startOver()" class="btn" style="margin-top: 20px; background: #6c757d;">üîÑ Create New Plan</button>
            </div>
        </div>

        <footer class="footer">
            <p>Free to Start | Premium $2/month for unlimited plans</p>
        </footer>
    </div>

    <script>
        let currentRating = 0;
        let currentTopic = '';
        let quizAnswers = [];
        let reviewedCards = new Set();

        // Sample data for AI responses
        const samplePlans = {
            'algebra': {
                plan: [
                    { day: 1, task: "Review basic algebraic expressions and variables", time: "30 min" },
                    { day: 2, task: "Practice solving linear equations", time: "45 min" },
                    { day: 3, task: "Learn factoring techniques", time: "40 min" },
                    { day: 4, task: "Master quadratic equations", time: "50 min" },
                    { day: 5, task: "Practice word problems", time: "35 min" },
                    { day: 6, task: "Review graphing linear functions", time: "40 min" },
                    { day: 7, task: "Complete practice test and review mistakes", time: "60 min" }
                ],
                flashcards: [
                    { front: "What is a variable?", back: "A symbol (usually a letter) that represents an unknown number" },
                    { front: "What is 2x + 3 = 11?", back: "x = 4" },
                    { front: "What is the quadratic formula?", back: "x = (-b ¬± ‚àö(b¬≤-4ac)) / 2a" },
                    { front: "What is factoring?", back: "Breaking down an expression into its simplest multiplied form" },
                    { front: "What is a coefficient?", back: "The number in front of a variable (like the 3 in 3x)" },
                    { front: "What is an exponent?", back: "A number that tells you how many times to multiply the base by itself" },
                    { front: "What is FOIL?", back: "First, Outer, Inner, Last - method for multiplying binomials" },
                    { front: "What is a polynomial?", back: "An expression with multiple terms (like 3x¬≤ + 2x + 1)" },
                    { front: "What is the slope formula?", back: "m = (y‚ÇÇ - y‚ÇÅ) / (x‚ÇÇ - x‚ÇÅ)" },
                    { front: "What is y = mx + b?", back: "Slope-intercept form of a linear equation" }
                ],
                quiz: [
                    {
                        question: "Solve for x: 2x + 5 = 13",
                        answers: ["x = 4", "x = 6", "x = 8", "x = 9"],
                        correct: 0
                    },
                    {
                        question: "What is the coefficient of x in the expression 7x + 3?",
                        answers: ["3", "7", "x", "10"],
                        correct: 1
                    },
                    {
                        question: "Factor: x¬≤ + 5x + 6",
                        answers: ["(x + 2)(x + 3)", "(x + 1)(x + 6)", "(x + 4)(x + 2)", "(x + 5)(x + 1)"],
                        correct: 0
                    },
                    {
                        question: "What is the slope of the line y = 3x + 2?",
                        answers: ["2", "3", "5", "1"],
                        correct: 1
                    },
                    {
                        question: "Solve: x¬≤ - 4 = 0",
                        answers: ["x = ¬±2", "x = ¬±4", "x = 2", "x = 4"],
                        correct: 0
                    }
                ]
            },
            'trigonometry': {
                plan: [
                    { day: 1, task: "Learn basic trigonometric ratios (sin, cos, tan)", time: "40 min" },
                    { day: 2, task: "Practice with right triangles", time: "45 min" },
                    { day: 3, task: "Study unit circle basics", time: "50 min" },
                    { day: 4, task: "Learn trigonometric identities", time: "45 min" },
                    { day: 5, task: "Practice graphing trig functions", time: "40 min" },
                    { day: 6, task: "Solve trigonometric equations", time: "45 min" },
                    { day: 7, task: "Review and practice mixed problems", time: "60 min" }
                ],
                flashcards: [
                    { front: "What is sin Œ∏?", back: "Opposite / Hypotenuse" },
                    { front: "What is cos Œ∏?", back: "Adjacent / Hypotenuse" },
                    { front: "What is tan Œ∏?", back: "Opposite / Adjacent" },
                    { front: "What is sin(30¬∞)?", back: "1/2" },
                    { front: "What is cos(60¬∞)?", back: "1/2" },
                    { front: "What is tan(45¬∞)?", back: "1" },
                    { front: "What is the Pythagorean identity?", back: "sin¬≤Œ∏ + cos¬≤Œ∏ = 1" },
                    { front: "What is the period of sin(x)?", back: "2œÄ" },
                    { front: "What is sin(90¬∞)?", back: "1" },
                    { front: "What is cos(0¬∞)?", back: "1" }
                ],
                quiz: [
                    {
                        question: "In a right triangle, if the opposite side is 3 and hypotenuse is 5, what is sin Œ∏?",
                        answers: ["3/5", "4/5", "3/4", "5/3"],
                        correct: 0
                    },
                    {
                        question: "What is cos(60¬∞)?",
                        answers: ["1/2", "‚àö3/2", "1", "‚àö2/2"],
                        correct: 0
                    },
                    {
                        question: "If sin Œ∏ = 3/5, what is cos Œ∏? (assuming Œ∏ is acute)",
                        answers: ["4/5", "3/4", "5/4", "5/3"],
                        correct: 0
                    },
                    {
                        question: "What is the range of the sine function?",
                        answers: ["[-1, 1]", "[0, 1]", "[-œÄ, œÄ]", "All real numbers"],
                        correct: 0
                    },
                    {
                        question: "What is tan(45¬∞)?",
                        answers: ["1", "‚àö2", "1/2", "‚àö3"],
                        correct: 0
                    }
                ]
            },
            'calculus': {
                plan: [
                    { day: 1, task: "Review limits and continuity", time: "45 min" },
                    { day: 2, task: "Learn basic derivative rules", time: "50 min" },
                    { day: 3, task: "Practice chain rule and product rule", time: "45 min" },
                    { day: 4, task: "Study applications of derivatives", time: "40 min" },
                    { day: 5, task: "Introduction to integration", time: "50 min" },
                    { day: 6, task: "Practice basic integration techniques", time: "45 min" },
                    { day: 7, task: "Review fundamental theorem of calculus", time: "55 min" }
                ],
                flashcards: [
                    { front: "What is the derivative of x¬≤?", back: "2x" },
                    { front: "What is the derivative of sin(x)?", back: "cos(x)" },
                    { front: "What is the derivative of eÀ£?", back: "eÀ£" },
                    { front: "What is the power rule?", back: "d/dx[x‚Åø] = nx‚Åø‚Åª¬π" },
                    { front: "What is the chain rule?", back: "d/dx[f(g(x))] = f'(g(x)) ¬∑ g'(x)" },
                    { front: "What is ‚à´x dx?", back: "x¬≤/2 + C" },
                    { front: "What is the derivative of ln(x)?", back: "1/x" },
                    { front: "What is the product rule?", back: "(fg)' = f'g + fg'" },
                    { front: "What is ‚à´cos(x) dx?", back: "sin(x) + C" },
                    { front: "What does a derivative represent?", back: "The instantaneous rate of change or slope of a tangent line" }
                ],
                quiz: [
                    {
                        question: "What is the derivative of f(x) = 3x¬≤ + 2x - 1?",
                        answers: ["6x + 2", "6x - 1", "3x + 2", "6x¬≤"],
                        correct: 0
                    },
                    {
                        question: "What is lim(x‚Üí0) sin(x)/x?",
                        answers: ["1", "0", "‚àû", "undefined"],
                        correct: 0
                    },
                    {
                        question: "Using the chain rule, what is d/dx[sin(2x)]?",
                        answers: ["2cos(2x)", "cos(2x)", "2sin(2x)", "-2cos(2x)"],
                        correct: 0
                    },
                    {
                        question: "What is ‚à´3x¬≤ dx?",
                        answers: ["x¬≥ + C", "6x + C", "3x¬≥ + C", "x¬≥/3 + C"],
                        correct: 0
                    },
                    {
                        question: "At a critical point, the derivative equals:",
                        answers: ["0", "1", "‚àû", "-1"],
                        correct: 0
                    }
                ]
            }
        };

        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tab).classList.add('active');
        }

        function switchResultTab(tab) {
            document.querySelectorAll('#results .tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('#results .tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tab + '-tab').classList.add('active');
        }

        document.getElementById('studyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            generateStudyPlan();
        });

        function generateStudyPlan() {
            const topic = document.getElementById('topic').value.toLowerCase();
            const hours = document.getElementById('hours').value;
            const style = document.getElementById('style').value;

            currentTopic = topic;

            // Show loading
            document.getElementById('loading').classList.add('show');
            
            // Simulate AI processing with progress bar
            let progress = 0;
            const progressBar = document.querySelector('.progress-fill');
            const progressInterval = setInterval(() => {
                progress += Math.random() * 20;
                if (progress > 100) progress = 100;
                progressBar.style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    setTimeout(() => {
                        showResults(topic, hours, style);
                    }, 500);
                }
            }, 200);
        }

        function showResults(topic, hours, style) {
            document.getElementById('loading').classList.remove('show');
            
            // Find matching topic data
            let topicData = null;
            for (let key in samplePlans) {
                if (topic.includes(key)) {
                    topicData = samplePlans[key];
                    break;
                }
            }
            
            // Fallback to algebra if no match
            if (!topicData) {
                topicData = samplePlans['algebra'];
            }

            // Generate study plan
            generatePlanDisplay(topicData.plan, topic, hours, style);
            generateFlashcards(topicData.flashcards);
            generateQuiz(topicData.quiz);
            
            // Show results section
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        function generatePlanDisplay(planData, topic, hours, style) {
            const container = document.getElementById('studyPlanResults');
            
            let html = `
                <h3>üìÖ Your 7-Day Study Plan: ${topic.charAt(0).toUpperCase() + topic.slice(1)}</h3>
                <p><strong>Total Study Time:</strong> ${hours} hours/week | <strong>Learning Style:</strong> ${style}</p>
                <div class="study-plan">
            `;
            
            planData.forEach(day => {
                html += `
                    <div class="plan-day">
                        <h4>Day ${day.day}</h4>
                        <p>${day.task}</p>
                        <small>‚è∞ ${day.time}</small>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }

        function generateFlashcards(flashcardData) {
            const container = document.getElementById('flashcardsResults');
            let html = '';
            
            flashcardData.forEach((card, index) => {
                html += `
                    <div class="flashcard" onclick="flipCard(${index})">
                        <div class="flashcard-inner" id="card-${index}">
                            <div class="flashcard-front">
                                <div>${card.front}</div>
                            </div>
                            <div class="flashcard-back">
                                <div>${card.back}</div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function flipCard(index) {
            const card = document.getElementById(`card-${index}`).parentElement;
            card.classList.toggle('flipped');
            
            if (!reviewedCards.has(index)) {
                reviewedCards.add(index);
                updateCardProgress();
            }
        }

        function updateCardProgress() {
            const progress = document.getElementById('cardProgress');
            progress.textContent = `${reviewedCards.size}/10 cards reviewed`;
        }

        function generateQuiz(quizData) {
            const container = document.getElementById('quizResults');
            quizAnswers = quizData;
            let html = '';
            
            quizData.forEach((q, qIndex) => {
                html += `
                    <div class="question">
                        <h4>Question ${qIndex + 1}: ${q.question}</h4>
                        <div class="answers">
                `;
                
                q.answers.forEach((answer, aIndex) => {
                    html += `
                        <div class="answer" onclick="selectAnswer(${qIndex}, ${aIndex})">
                            ${String.fromCharCode(65 + aIndex)}. ${answer}
                        </div>
                    `;
                });
                
                html += '</div></div>';
            });
            
            container.innerHTML = html;
            document.getElementById('checkAnswers').classList.remove('hidden');
        }

        let selectedAnswers = {};

        function selectAnswer(questionIndex, answerIndex) {
            // Remove previous selections for this question
            const questionDiv = document.querySelectorAll('.question')[questionIndex];
            questionDiv.querySelectorAll('.answer').forEach(answer => {
                answer.classList.remove('selected');
            });
            
            // Select new answer
            const selectedAnswer = questionDiv.querySelectorAll('.answer')[answerIndex];
            selectedAnswer.classList.add('selected');
            
            selectedAnswers[questionIndex] = answerIndex;
        }

        function checkQuizAnswers() {
            let correct = 0;
            
            quizAnswers.forEach((q, qIndex) => {
                const questionDiv = document.querySelectorAll('.question')[qIndex];
                const answers = questionDiv.querySelectorAll('.answer');
                
                answers.forEach((answer, aIndex) => {
                    answer.classList.remove('selected');
                    if (aIndex === q.correct) {
                        answer.classList.add('correct');
                    } else if (selectedAnswers[qIndex] === aIndex) {
                        answer.classList.add('incorrect');
                    }
                });
                
                if (selectedAnswers[qIndex] === q.correct) {
                    correct++;
                }
            });
            
            const percentage = Math.round((correct / quizAnswers.length) * 100);
            document.getElementById('quizScore').innerHTML = `
                <h3>Quiz Results</h3>
                <p>You scored ${correct}/${quizAnswers.length} (${percentage}%)</p>
                <p>${percentage >= 80 ? 'üéâ Excellent work!' : percentage >= 60 ? 'üëç Good job! Keep practicing.' : 'üìö Keep studying and try again!'}</p>
            `;
            document.getElementById('quizScore').classList.remove('hidden');
            document.getElementById('checkAnswers').classList.add('hidden');
        }

        function createManualPlan() {
            const topic = document.getElementById('customTopic').value;
            const plan = document.getElementById('customPlan').value;
            
            if (!topic || !plan) {
                alert('Please fill in both the topic and your study plan.');
                return;
            }
            
            const container = document.getElementById('studyPlanResults');
            container.innerHTML = `
                <h3>üìù Your Manual Study Plan: ${topic}</h3>
                <div class="study-plan">
                    <div class="plan-day">
                        <h4>Your Custom Plan</h4>
                        <pre style="white-space: pre-wrap; font-family: inherit;">${plan}</pre>
                    </div>
                </div>
            `;
            
            // Hide flashcards and quiz for manual mode
            document.getElementById('flashcardsResults').innerHTML = '<p>Flashcards are not available in manual mode. Create your own or switch to AI mode!</p>';
            document.getElementById('quizResults').innerHTML = '<p>Quizzes are not available in manual mode. Create your own or switch to AI mode!</p>';
            
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // Rating system
        document.querySelectorAll('.star').forEach(star => {
            star.addEventListener('click', function() {
                currentRating = parseInt(this.dataset.rating);
                updateStars();
            });
        });

        function updateStars() {
            document.querySelectorAll('.star').forEach((star, index) => {
                if (index < currentRating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function submitFeedback() {
            const suggestions = document.getElementById('suggestions').value;
            
            if (currentRating === 0) {
                alert('Please select a rating before submitting.');
                return;
            }
            
            // Simulate feedback submission
            alert(`Thank you for your ${currentRating}-star rating! Your feedback helps us improve StudySparkAI.`);
            
            // Reset feedback
            currentRating = 0;
            updateStars();
            document.getElementById('suggestions').value = '';
        }

        function startOver() {
            // Reset form
            document.getElementById('studyForm').reset();
            document.getElementById('customTopic').value = '';
            document.getElementById('customPlan').value = '';
            
            // Hide results
            document.getElementById('results').classList.add('hidden');
            
            // Reset data
            selectedAnswers = {};
            reviewedCards.clear();
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>
